# Evo-lang 项目开发提示词 / Project Development Prompt

## 项目简介 / Project Overview

该项目是一门自进化的编程语言，能够根据使用和需求自我进化，终极目标是理解人类思想，促进人类与智能生命和谐共生。

该项目以一首古诗词作为起点： 
《静夜思》—— 李白 
床前明月光，疑是地上霜。举头望明月，低头思故乡。

## 工作流程 / Workflow

### 1. 理解项目（优先使用索引文档，减少token消耗）

**必须首先查阅的索引文档**（按优先级）：
1. **ARCHITECTURE.md** - 了解项目架构、模块索引、数据流图
2. **PROJECT_MAP.md** - 快速定位代码文件和模块
3. **docs/API-REFERENCE.md** - 查找函数签名和接口（无需阅读完整实现）
4. **CHANGELOG.md** - 了解开发历史和已完成功能
5. **docs/FEATURES.md** - 查看功能清单（了解已有功能）

**重要提示**：
- **不要直接搜索代码**，先通过索引文档定位到具体位置，再读取相关文件
- **使用索引文档可减少60-80%的token使用**，避免全量读取代码

### 2. 规划目标

根据当前项目情况：
- 查阅 **CHANGELOG.md** 了解开发进度和"计划中的功能"
- 查阅 **docs/evolution-status.md** 了解技术债务和下一步方向
- 自行规划：
  - **长期目标**：参考项目的终极目标（理解人类思想，促进和谐共生）
  - **短期目标**：基于CHANGELOG中的计划功能和项目现状
  - **下一步实现内容**：明确具体任务

### 3. 实现功能

#### 添加新功能时
1. **查阅架构文档** - 查看 `ARCHITECTURE.md` 找到合适的模块位置
2. **参考API设计** - 查看 `docs/API-REFERENCE.md` 了解类似功能的API设计
3. **定位代码文件** - 使用 `PROJECT_MAP.md` 快速查找表定位相关代码
4. **遵循代码规范** - 参考 `.cursorrules` 中的代码风格和模式
5. **参考现有实现** - 只读取相关文件，不要读取整个目录

#### 修改现有功能时
1. **查阅功能列表** - 查看 `docs/FEATURES.md` 了解功能详情
2. **查看架构信息** - 查看 `ARCHITECTURE.md` 找到相关模块
3. **了解历史变更** - 查看 `CHANGELOG.md` 了解历史变更

### 4. 测试

- 每实现一步，确保测试通过
- 格式化代码：使用 `rustfmt` 格式化代码
- **维护相关文档**（见下方文档更新清单）

### 5. 文档更新（必须） / Documentation Updates (Required)

每次提交前必须更新相关文档：

#### 必须更新的文档
- ✅ **CHANGELOG.md** - 添加新的任务记录到"已完成的功能"部分，格式参考现有条目
  - 位置：`CHANGELOG.md` → "已完成的功能"部分
  - 格式：任务编号、完成标记、任务描述、详细说明（如需要）

#### 根据变更类型更新的文档
- ✅ **docs/FEATURES.md** - 如果是新功能，添加到相应的功能分类中
  - 位置：根据功能类型添加到对应的分类（核心功能、解析器、运行时等）
  
- ✅ **ARCHITECTURE.md** - 如果改变了架构或模块结构
  - 更新模块索引、依赖关系、数据流图等相关部分
  
- ✅ **docs/API-REFERENCE.md** - 如果有新的API接口或修改了现有接口
  - 添加新的函数签名或更新现有签名
  
- ✅ **PROJECT_MAP.md** - 如果添加了新的关键文件
  - 更新文件映射表和快速查找表

#### 文档更新检查清单
提交前确认：
- [ ] CHANGELOG.md 已更新
- [ ] 如果是新功能，FEATURES.md 已更新
- [ ] 如果改变架构，ARCHITECTURE.md 已更新
- [ ] 如果有新API，API-REFERENCE.md 已更新
- [ ] 代码已格式化（rustfmt）
- [ ] 测试已通过

#### 总结提交消息
- 根据文档更新内容总结生成git提交描述消息，写入commit_msg.txt
- 提交到git：带上版本号自动提交更改（参考之前的消息格式）

## 快速导航 / Quick Navigation

### 按任务查找文档
- **了解项目架构** → `ARCHITECTURE.md`
- **定位代码位置** → `PROJECT_MAP.md`
- **查找API接口** → `docs/API-REFERENCE.md`
- **查看功能列表** → `docs/FEATURES.md`
- **了解开发历史** → `CHANGELOG.md`
- **查看项目状态** → `docs/evolution-status.md`
- **完整文档索引** → `docs/README.md`

### 代码模块快速定位
- **语法定义** → `src/grammar/core.rs`
- **解析逻辑** → `src/parser/adaptive.rs`
- **执行逻辑** → `src/runtime/interpreter.rs`
- **进化引擎** → `src/evolution/engine.rs`
- **模块导航** → 查看各模块的 `mod.rs` 文件（包含快速导航信息）

## 关键提示 / Key Tips

1. **优先使用索引文档** - ARCHITECTURE.md、PROJECT_MAP.md、API-REFERENCE.md
2. **避免全量读取** - 根据索引定位到具体文件和方法，而不是读取整个目录
3. **保持文档同步** - 代码变更时同步更新相关文档（特别是CHANGELOG.md）
4. **遵循代码规范** - 参考 `.cursorrules` 中的代码风格指南
5. **模块化思考** - 新功能放在合适的模块，遵循现有的模块职责划分

## 项目目标 / Project Goals

### 终极目标
理解人类思想，促进人类与智能生命和谐共生

### 当前重点
- 自进化能力的持续完善
- 理解能力的深度增强
- 代码生成与优化的智能化
- 自举能力的扩展
- 记忆与反思机制的改进

查看 `docs/evolution-status.md` 了解详细进展和技术债务。
